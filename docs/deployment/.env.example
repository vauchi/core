# WebBook Relay Configuration
# Copy this file to .env and customize for your deployment

# === Network Configuration ===

# Address and port for WebSocket server
RELAY_LISTEN_ADDR=0.0.0.0:8080

# === Connection Limits ===

# Maximum concurrent WebSocket connections
RELAY_MAX_CONNECTIONS=1000

# Maximum message size in bytes (default: 1MB)
RELAY_MAX_MESSAGE_SIZE=1048576

# === Rate Limiting ===

# Maximum messages per client per minute
RELAY_RATE_LIMIT=60

# === Storage Configuration ===

# Storage backend: "memory" or "sqlite"
# Use "sqlite" for production (persistent storage)
# Use "memory" for development/testing only
RELAY_STORAGE_BACKEND=sqlite

# Data directory for SQLite database and recovery proofs
# For Docker: /data (mapped to a volume)
# For bare-metal: /var/lib/webbook-relay
RELAY_DATA_DIR=/data

# === Data Retention ===

# Blob time-to-live in seconds
# Default: 7776000 (90 days)
RELAY_BLOB_TTL_SECS=7776000

# Cleanup job interval in seconds
# Default: 3600 (1 hour)
RELAY_CLEANUP_INTERVAL=3600

# === Logging ===

# Log level: error, warn, info, debug, trace
# Format: module=level,module2=level2
RUST_LOG=webbook_relay=info

# === TLS Configuration ===
# Note: TLS is handled by the reverse proxy (nginx/Caddy), not the relay server.
# See docs/deployment/relay-production.md for TLS setup instructions.

# === Production Recommendations ===
# - Always use sqlite backend in production
# - Set RELAY_MAX_CONNECTIONS based on expected load
# - Monitor metrics at http://localhost:8081/metrics
# - Back up the RELAY_DATA_DIR regularly
# - Use a reverse proxy (nginx/Caddy) for TLS termination
