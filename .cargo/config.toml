# SPDX-FileCopyrightText: 2026 Mattia Egloff <mattia.egloff@pm.me>
#
# SPDX-License-Identifier: GPL-3.0-or-later

# Rust-analyzer proc-macro support
[build]
rustflags = ["--cfg", "rust_analyzer"]

# Use mold linker on Linux for faster linking (2-5x speedup)
# Install: apt install mold OR cargo install mold
[target.x86_64-unknown-linux-gnu]
linker = "clang"
rustflags = ["-C", "link-arg=-fuse-ld=mold", "--cfg", "rust_analyzer"]

# Android NDK configuration for cross-compilation
# NOTE: Linker paths are set via environment variables in build-android.sh
# to support different NDK locations (Android Studio SDK vs standalone NDK)

# If you have a standalone NDK, you can hardcode paths here.
# Otherwise, the build script will set the linker via CARGO_TARGET_*_LINKER env vars.

# Example for standalone NDK at /opt/android-ndk:
# [target.aarch64-linux-android]
# linker = "/opt/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android24-clang"
